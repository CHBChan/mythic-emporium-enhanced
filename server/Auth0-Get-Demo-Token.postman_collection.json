{
  "info": {
    "name": "Auth0 Get Demo Token",
    "_postman_id": "d7a0b5cd-3e0e-4f8a-9a11-123456789abc",
    "description": "Get Auth0 access token for demo user via Resource Owner Password Grant",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Get Demo User Access Token",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"grant_type\": \"password\",\n  \"username\": \"{{username}}\",\n  \"password\": \"{{password}}\",\n  \"audience\": \"{{audience}}\",\n  \"client_id\": \"{{client_id}}\",\n  \"client_secret\": \"{{client_secret}}\",\n  \"scope\": \"openid profile email\"\n}"
        },
        "url": {
          "raw": "https://{{auth0_domain}}/oauth/token",
          "protocol": "https",
          "host": [
            "{{auth0_domain}}"
          ],
          "path": [
            "oauth",
            "token"
          ]
        }
      },
      "response": []
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "exec": [],
        "type": "text/javascript"
      }
    },
    {
      "listen": "test",
      "script": {
        "exec": [
          "if(pm.response.code === 200) {",
          "    var jsonData = pm.response.json();",
          "    pm.environment.set(\"access_token\", jsonData.access_token);",
          "    console.log(\"Access token saved to environment variable 'access_token'.\");",
          "} else {",
          "    console.log(\"Failed to get token. Status: \" + pm.response.code);",
          "}"
        ],
        "type": "text/javascript"
      }
    }
  ],
  "variable": [
    {
      "key": "auth0_domain",
      "value": "dev-kkmhyt7ojytksu4y.us.auth0.com"
    },
    {
      "key": "client_id",
      "value": "dDr2OVcXgfNv5UK3k6eXa6xTcK1QQLvW"
    },
    {
      "key": "client_secret",
      "value": "8NdJ7dlziEwEC3iIzZiMD3EJEEbGvJrV1vxbmbINsUNpvEe5KnFphmr5p5ZyG8Ym"
    },
    {
      "key": "audience",
      "value": "https://dev-kkmhyt7ojytksu4y.us.auth0.com/api/v2/"
    },
    {
      "key": "username",
      "value": "demo@user.test"
    },
    {
      "key": "password",
      "value": "demo124!"
    },
    {
      "key": "access_token",
      "value": ""
    }
  ]
}
